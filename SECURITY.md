# OpsKit Security（v0.x）

当前发布版本：`v0.3.1-preview.2`

## 1. 默认安全原则

- 默认按“最小权限、最小动作”设计流程
- 未显式授权时，不执行高风险破坏性操作
- 所有状态写入与产物生成以可追溯为前提

## 2. 命令执行边界

- 外部命令统一走 `executil`（禁止插件自行 `exec.Command`）
- 建议采用 allowlist + denylist 双重约束
- 典型 denylist：`rm`、`dd`、`mkfs`、`shutdown`、`reboot` 等危险命令

## 3. 危险动作人工确认

- `stop/disable` 等高影响操作必须人工确认
- 自动流程默认不执行服务下线类动作
- 并发冲突触发全局锁返回退出码 `4`

## 4. UI 监听与网络暴露

- 建议默认仅监听本机：`127.0.0.1`
- 如需内网访问，必须显式配置 `--listen <ip:port>`
- 不建议将调试 UI 直接暴露到公网

## 5. 脱敏规则

- 默认脱敏关键字：`password`、`token`、`secret`
- 报告与证据包优先输出 hash/摘要，避免明文敏感信息
- 发布开源仓库时严禁提交真实环境日志、证据包、账号信息

## 6. 开源发布红线

- 不发布客户模板与客户环境配置
- 不发布生产级 deploy 脚本与密钥信息
- 不发布真实验收包、真实日志、真实业务数据
