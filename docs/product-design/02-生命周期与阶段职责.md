# 02 生命周期与阶段职责

## 2.1 生命周期总览

OpsKit 在“服务器首次接管”介入，持续到“验收交付并稳定运行”，统一采用 A~F 六阶段。

## 2.2 各阶段职责与产出

### A Preflight

目标：识别风险，不做破坏性修复。  
典型检查：系统信息、时间同步、挂载、网络、端口冲突、防火墙/SELinux、systemd 可用性。  
产出：Preflight 报告 + 风险项（含建议）。

### B Baseline

目标：建立可运维的最小基线。  
典型动作：目录准备、权限确认、基线快照。  
产出：Baseline 报告 + 基线证据。

### C Deploy

目标：部署模式完成离线部署；接管模式完成用途声明。  
典型动作：离线包校验、解包、配置渲染、systemd 注册、启动验证，或接管声明与资产采集。  
产出：Deploy 报告 + 版本/配置证据。

### D Operate

目标：持续巡检并计算健康状态。  
典型检查：服务状态、端口/HTTP、资源阈值。  
产出：巡检报告 + 状态变化记录。

### E Recover

目标：异常/重启后自动恢复，且可控。  
典型动作：就绪判定、按依赖顺序恢复、有限重试、熔断、失败采集。  
产出：Recover 报告 + collect 证据包（失败时）。

### F Accept/Handover

目标：形成可验收、可归档、可追溯交付物。  
典型动作：hash 采集、运行态快照、报告汇总、打包。  
产出：acceptance 包 + handover 报告（HTML/JSON/Bundle）。

## 2.3 自动化与人工边界

默认自动执行：

- 巡检、健康判定、恢复尝试、证据生成

必须人工确认：

- 服务下线、危险修复、破坏性系统变更
